# DoubleBuffer

双缓冲，通常用于持续地读取或写入数据的过程。

在正式说明之前，我先设定一下库的使用方法，以便更加清晰地理解。如果想将单缓冲任务更新为双缓冲任务，需对接接口并创建双缓冲对象，双缓冲对象调用接口以实现功能。

单缓冲任务通常按照`写缓冲区->读缓冲区`来实现功能，为了保持上层开发的通用性，双缓冲任务依然按照`写缓冲区->读缓冲区`的过程进行使用，仅在创建对象时有所区别。

在上层应用看来，双缓冲对象和单缓冲对象除了运行效率和创建对象的过程上有所区别，其余是一致的，即使用缓冲区的过程是一致的。因此使用哪一个缓冲区并不由应用层决定，而是内嵌于库中的。

在使用双缓冲进行数据的写入时，仅调用写入数据函数，写入完成会执行设置的回调函数；在使用双缓冲进行数据的读取时，仅调用读取数据函数，可以设置数据接收中断函数，以实现中断读取缓冲区。

库用于嵌入式设备，应考虑到嵌入式设备有`单核情况`和`无自动化情况`。

为了应对更多情况，库设有写入缓冲区完成回调函数、读取缓冲区完成回调函数、缓冲区交换回调函数、缓冲区待读取回调函数、缓冲区可写入回调函数。同时设有缓冲区写入完成信号、缓冲区读取完成信号，这两个信号由CPU触发，信号触发后代表缓冲区写入完成、缓冲区读取完成，缓冲区对象将会自动执行设定的动作。

考虑到`多核情况`，可利用回调函数提醒其它核进行缓冲区数据的应用动作；考虑到`自动化情况`，可利用回调函数改变数据基址。在真正意义的多线程上，如果应用动作完成，可能存在完成回调函数，可设置缓冲区待读取回调函数、缓冲区可写入回调函数来利用这个回调函数提示缓冲区数据使用完成。

总的来说，双缓冲能够实现写入和读取任意项数据（通过5个回调函数）。
